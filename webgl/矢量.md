## 矢量是什么？

矢量（Vector）也称为向量是数学、物理学和工程科学等多个自然科学中的基本概念。矢量同时具有大小和方向，需要注意的是矢量是没有固定位置的，它可以在空间中随便移动。

在实际编码中，矢量其实就是一个普通的数组，如[X,Y,Z] 。矢量在表示时，会在上方加一个箭头，如矢量
$$
\overrightarrow{A}
$$
，下面为了简单就不加箭头了。

我们知道矢量只有方向和大小，没有位置。如下图所示，矢量 A 可以表示为[1,1] ，它和矢量 B 是同一个矢量，因为矢量没有位置，所以可以随便的移动它，最终还是表示同一个矢量。矢量带箭头的那一端称为终点，另一端称为起点。

![](..\webgl\b95b399f8e9a4e2ba82180ea94e30aaa~tplv-k3u1fbpfcp-zoom-in-crop-mark_1512_0_0_0.webp)

## 零矢量

有个特殊的矢量零矢量，零矢量每个位置都是 `0` ，如三维零矢量可以表示为[0, 0, 0]，零矢量没有大小、没有方向当然它也没有位置。任何矢量加上零矢量都等于它本身。

## 矢量加减法

矢量的加减法就和标量的加减法一样，就是把矢量的对应项加或减起来。矢量只能和同维度的矢量相加或相减。也就是 2D 矢量只能和 2D 矢量进行运算，不能和 3D 矢量运算。具体操作，如下所示

```js
[x1, y1, z1] + [x2, y2, z2] = [x1 + x2, y1 + y2, z1 + z2]

[x1, y1, z1] - [x2, y2, z2] = [x1 - x2, y1 - y2, z1 - z2]
```

矢量加法是可交换的 A+B=B+A*A*+*B*=*B*+*A*，矢量减法可反交换 A−B=−(B−A)*A*−*B*=−(*B*−*A*)，就和标量一样。

在几何空间中，矢量的加减法对应的可视化，如下图所示。

![](..\webgl\cacc62c5180f4e48901c1c7c92f82306~tplv-k3u1fbpfcp-zoom-in-crop-mark_1512_0_0_0.webp)

A+B 是把一个点先应用 A ，然后应用 B ，然后 A+B 就等于从 A 的尾部到 B 的头部的矢量。 A−B也是一样，先应用 A，再应用 -B （也就是将 B 的方向反转下）。需要注意的是 A−B 与 B−A是两个方向相反的矢量。

## 

## 标量和矢量乘法

标量和矢量乘法也非常简单，直接用标量乘上矢量中各个项就行了。

```js
k * [x, y, z] = [kx, ky, kz]
```

如果 `k` 为 `-1` 时，会得到矢量的负矢量（方向相反，大小相等）。

在几何中，标量乘矢量，标量就是矢量长度的缩放因子，如 `k` 等于 `2`，那么所得矢量是原矢量两倍长。

## 矢量大小

矢量的大小用双垂直线表示，比如矢量 A 的大小表示为 ∥A∥。要计算矢量大小也非常简单，直接对它进行勾股定理运算就行了，计算方式如下所示。
$$
∥A∥=∥[x,y]∥=\sqrt(x^2 +y^2)
$$

$$
∥B∥=∥[x,y,z]∥= \sqrt(x^2 +y^2 +z^2)
$$

![](..\webgl\233184a6765c46d3b8bdb4b9e6f185d2~tplv-k3u1fbpfcp-zoom-in-crop-mark_1512_0_0_0.webp)

如上图所示，计算矢量的大小其实就是计算直角三角形斜边的大小，我们知道直角三角形两条直角边的大小，那么直接使用勾股定理就可以计算出矢量的大小。

## 单位矢量

另一个特殊的矢量是单位矢量，单位矢量是大小为 `1` 的矢量，单位矢量也称为归一化矢量或法线，称为法线时一般表示该矢量垂直于一个表面。（后续文章将详细讲解有意思的法线）

要归一化一个矢量，只需要将矢量除以它的大小就行了，计算方式如下所示。
$$
len=∥[x,y,z]∥=\sqrt(x^2 +y^2 +z^2)
$$

$$
norm = \frac{[x,y,z]}{len} = [ \frac{x}{len}, \frac{y}{len}, \frac{z}{len} ]
$$

归一化一个矢量，就是将矢量的长度变为 `1`，方向不变。

## 矢量乘法

矢量和矢量的乘法一共有两种方式，分别是点积和叉积。

### 点积



矢量点积的结果是一个标量，点积乘法的符号是一个点 `·`，运算方式是将两个矢量各个分量相乘再相加。如下所示。
$$
[x1,y1,z1]⋅[x2,y2,z2]=x1x2+y1y2+z1z2
$$
矢量点积运算满足如下性质。
$$
A⋅B=B⋅A
$$

$$
(kA)⋅B=k(A⋅B)=A⋅(kB)
$$

$$
A⋅(B+C)=A⋅B+A⋅C
$$

$$
A⋅A=∥A∥^2
$$

下面让我们看看在几何中，矢量点积的可视化效果。矢量点积在几何中可以解释为投影。下图中的矢量 A 为单位矢量。

![](..\webgl\9b0b1dd1444b4a2b875ff87250ceae7f~tplv-k3u1fbpfcp-zoom-in-crop-mark_1512_0_0_0.webp)

点积 $ A \cdot B $等于 B 投影到平行于 A 的任意线上的有符号长度，乘以 A 的长度。

矢量的点积可以给两个矢量的方向做一个初略的判断，如果两个矢量方向差不多相同则点积大于 `0`，如果垂直则等于 `0`，如果差不多相反则小于 `0`。

点积的另一个用处的是可以把一个矢量分解为两个矢量，分别是垂直分量和平行分量。

![](..\webgl\505be2ce1e4840f195f77a8cdf5c2b78~tplv-k3u1fbpfcp-zoom-in-crop-mark_1512_0_0_0.webp)

上图中 A 还是单位矢量。我们知道 B 等于 $B∥+B⊥$。其中 $∥B∥∥$ 等于$A \cdot B$。所以我们可以得出下面结论。
$$
B∥=∥B∥∥∗A=(A⋅B)A
$$

$$
B⊥=B−B∥=B−(A⋅B)A
$$

另外我们还可以利用点积求出两个矢量间的夹角。

![](..\webgl\849b5904b2ad4a90a32ab61d73e144ed~tplv-k3u1fbpfcp-zoom-in-crop-mark_1512_0_0_0.webp)

上图中 A 和 B 都是单位矢量。根据基本三角函数，cos(θ) 等于对边的邻边比斜边.
$$
cos(θ)=\frac{A⋅B}{∥B∥}=A⋅B
$$
两个单位矢量的点积就等于它们之间的余旋值。那么我们也可以得出任何矢量之间余旋值得公式。
$$
A⋅B=∥A∥∗∥B∥∗cos(θ)\\
θ=arccos(\frac{A⋅B}{∥A∥∗∥B∥}) 
$$

### 叉积



叉积只能应用在三维中，矢量叉积将产生三维矢量，矢量叉积使用 ×× 符号。两个矢量叉积公式如下。
$$
[x1,y1,z1]×[x2,y2,z2]=[y1z2−z1y2,z1x2−x1z2,x1y2−y1x2]
$$
叉积和点积一起使用时，叉积优先 $A \cdot B \times C = A \cdot (B \times C)$，因为如果点积优先的话，点积的结果是标量，不能再进行叉积运算。

矢量叉积运算还有如下特性。
$$
A×B=−(B×A)\\
(A×B)×C≠A×(B×C)
$$
在几何上，叉积产生的矢量将垂直原始的两个矢量，并且 $A×B$的长度等于 A 的长度乘以 B 的长度乘以它们间的正弦值。如下图所示。

![](..\webgl\172941c47c144139be241f1ab9269102~tplv-k3u1fbpfcp-zoom-in-crop-mark_1512_0_0_0.webp)
$$
∥A×B∥=∥A∥∗∥B∥∗sin(θ)
$$
如果 A 和 B 平行，或如果 A 或 B 为零矢量，则 $A \times B$ 的结果为零矢量。

$A \times B$ 矢量会有两个方向，那么是哪个朝向的矢量呢？

我们需要将 B 矢量的尾部移动到 A 矢量的头部，然后观察是顺时针旋转还是逆时针旋转。

如果是顺时针旋转，在左手坐标系中$ A \times B$会指向你，右手坐标系是远离。如果是逆时针旋转，在左手坐标系中$A \times B$是远离，右手坐标系是指向你。（如下图所示）

![](..\webgl\be60690babd34168aea5a5b79785e8c5~tplv-k3u1fbpfcp-zoom-in-crop-mark_1512_0_0_0.webp)

其实我们也可以伸出双手，右手坐标系伸出右手，左手坐标系伸出左手。手握拳伸出大拇指，然后将 4 指按照上图旋转方向旋转，大拇指的方向就是$A \times B$ 的方向。（还记得在[第一篇文章](https://juejin.cn/post/7146385806347730952)中讲解的 WebGL 是使用左手坐标系，坐标系和旋转方向将在后续文章中讲解）

## 矢量和点

看到这里大家脑中可能有一个疑问，矢量和点有啥区别，它们看起来都是一样的，例如 `[x, y, z]`， 你可以说它是一个矢量，也可以说它是一个点。

但是需要注意的是矢量和点是两种概念，矢量有大小和方向，没有位置。而点只代表一个位置。

矢量可以描述位移，如果将 `[2, 2]` 的矢量，应用在 `[1, 1]` 的点上，则代表将点移动到 `[3, 3]` 位置。我们也可以将点表示为来自原点的矢量。

![](..\webgl\7fda08ddfb1142c38efe1a3aeebfb9ce~tplv-k3u1fbpfcp-zoom-in-crop-mark_1512_0_0_0.webp)

如上图所示，矢量是一个箭头，而点就是指定位置上面的一个点，虽然它们都是使用 `x, y` 来表示。

另外还可以再添加一个分量来区分点和矢量，比如在三维中我们可以使用 4 个分量来区分点和矢量。`[x, y, z, w]`，如果 `w` 是 `0` 则代表矢量，否则代表是点，这也称为齐次坐标。（齐次坐标将在后续文章中讲解）

## 总结

这篇文章讲解了 WebGL 图形学可视化中必须要掌握的矢量知识，矢量是一个只有方向和大小，没有固定位置的箭头。和标量一样矢量也可以进行加减法和乘法操作，并且这些运算在几何中都有特定的可视化作用
